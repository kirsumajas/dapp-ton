{"version":3,"sources":["../src/utils/createJettonTransferMessage.ts"],"sourcesContent":["import { type Cell, beginCell } from \"@ton/ton\";\n\nimport type { AddressType, AmountType, QueryIdType } from \"../types\";\nimport { toAddress } from \"./toAddress\";\n\n/**\n * Implements `transfer` function from Jettons Standard.\n * [Docs](https://github.com/ton-blockchain/TEPs/blob/master/text/0074-jettons-standard.md#1-transfer)\n *\n * ```TL-B\n * transfer#0f8a7ea5 query_id:uint64 amount:(VarUInteger 16) destination:MsgAddress response_destination:MsgAddress custom_payload:(Maybe ^Cell) forward_ton_amount:(VarUInteger 16) forward_payload:(Either Cell ^Cell) = InternalMsgBody;\n * ```\n */\nexport function createJettonTransferMessage(params: {\n  queryId: QueryIdType;\n  amount: AmountType;\n  destination: AddressType;\n  responseDestination?: AddressType;\n  customPayload?: Cell;\n  forwardTonAmount: AmountType;\n  forwardPayload?: Cell;\n}) {\n  const builder = beginCell();\n\n  builder.storeUint(0xf8a7ea5, 32);\n  builder.storeUint(params.queryId, 64);\n  builder.storeCoins(BigInt(params.amount));\n  builder.storeAddress(toAddress(params.destination));\n  builder.storeAddress(\n    params.responseDestination\n      ? toAddress(params.responseDestination)\n      : undefined,\n  );\n\n  if (params.customPayload) {\n    builder.storeBit(true);\n    builder.storeRef(params.customPayload);\n  } else {\n    builder.storeBit(false);\n  }\n\n  builder.storeCoins(BigInt(params.forwardTonAmount));\n\n  if (params.forwardPayload) {\n    builder.storeBit(true);\n    builder.storeRef(params.forwardPayload);\n  } else {\n    builder.storeBit(false);\n  }\n\n  return builder.endCell();\n}\n"],"mappings":";;;;;AAAA,SAAoB,iBAAiB;AAa9B,SAAS,4BAA4B,QAQzC;AACD,QAAM,UAAU,UAAU;AAE1B,UAAQ,UAAU,WAAW,EAAE;AAC/B,UAAQ,UAAU,OAAO,SAAS,EAAE;AACpC,UAAQ,WAAW,OAAO,OAAO,MAAM,CAAC;AACxC,UAAQ,aAAa,UAAU,OAAO,WAAW,CAAC;AAClD,UAAQ;AAAA,IACN,OAAO,sBACH,UAAU,OAAO,mBAAmB,IACpC;AAAA,EACN;AAEA,MAAI,OAAO,eAAe;AACxB,YAAQ,SAAS,IAAI;AACrB,YAAQ,SAAS,OAAO,aAAa;AAAA,EACvC,OAAO;AACL,YAAQ,SAAS,KAAK;AAAA,EACxB;AAEA,UAAQ,WAAW,OAAO,OAAO,gBAAgB,CAAC;AAElD,MAAI,OAAO,gBAAgB;AACzB,YAAQ,SAAS,IAAI;AACrB,YAAQ,SAAS,OAAO,cAAc;AAAA,EACxC,OAAO;AACL,YAAQ,SAAS,KAAK;AAAA,EACxB;AAEA,SAAO,QAAQ,QAAQ;AACzB;","names":[]}